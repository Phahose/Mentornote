@page
@model Mentornote.Pages.Functionalities.PracticeTestModel
@{
    Layout = "Navigation";
}
<div class="fg">
    <div class="header">
        <a href="/Preview?noteId=@Model.Note.Id" class="back-btn">&larr;</a>
        <div>
            <h1>Practice Exam</h1>
            <span class="module-info">
                <span class="created-date">Created @Model.FlashcardSets[0].CreatedAt</span>
            </span>
        </div>
    </div>
    <div class="test-container">
        <form method="post" action="/SubmitExam">
            <!-- Question Block -->
            @for (int i = 0; i < Model.ActiveTest.Questions.Count; i++)
            {
                <div class="exam-question @(i == 0 ? "active" : "")" data-index="@i">
                    <div class="exam-progress">
                        Question <span id="current-question">@(i+1)</span> of <span id="total-questions">@Model.ActiveTest.Questions.Count</span>
                    </div>
                    <p>@Model.ActiveTest.Questions[i].QuestionText</p>
                    <div class="exam-options">
                        @foreach (var option in @Model.ActiveTest.Questions[i].Choices)
                        {
                            <label class="option">
                                <input type="radio" name="q@i" value="@option.ChoiceText">
                                <span>@option.ChoiceText</span>
                                <span>@option.IsCorrect</span>
                            </label>
                        }
                    </div>
                </div>
            }

            <div class="exam-navigation">
                <button type="submit" class="submit-btn">Submit Answer</button>
                <button type="submit" class="submit-test-btn">Submit Test</button>
            </div>
        </form>
       
    </div>
    <div class="controls">
        <button id="prevquestion-btn" class="prev-btn">Previous</button>
        <button id="nextquestion-btn" class="next-btn">Next</button>
    </div>
</div>

<script>
       let currentIndex = 0;
    const questions = document.querySelectorAll(".exam-question");

    document.getElementById("nextquestion-btn").addEventListener("click", (e) => {
        e.preventDefault(); // prevent form submit
        questions[currentIndex].classList.remove("active");
        currentIndex = (currentIndex + 1) % questions.length;
        questions[currentIndex].classList.add("active");
    });

    document.getElementById("prevquestion-btn").addEventListener("click", (e) => {
        e.preventDefault();
        questions[currentIndex].classList.remove("active");
        currentIndex = (currentIndex - 1 + questions.length) % questions.length;
        questions[currentIndex].classList.add("active");
    });


</script>