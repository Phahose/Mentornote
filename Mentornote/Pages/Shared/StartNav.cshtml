<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    <link rel="stylesheet" href="~/css/styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bruno+Ace&family=Michroma&family=Smooch+Sans:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Smooch+Sans:wght@100..900&display=swap" rel="stylesheet">

</head>
<body class="func-nav-body">
    <nav class="func-navigation" id="func-navigation">
        <a href="~/Start" class="brand">
            <img src="https://img.icons8.com/ios-filled/50/FFFFFF/graduation-cap.png" alt="Logo" class="logo" />
            <div class="brand-text">
                <h1>MentorNote</h1>
                <p>AI Study Assistant</p>
            </div>
        </a>
        @{
            var currentPath = Context.Request.Path; // current page route
        }
        <div class="nav-section">
            <p class="nav-section-title">STUDY TOOLS</p>
            <ul class="nav-links">
                <a href="~/Start" class="nav-item @(currentPath == "/Start" ? "active" : "") load-trigger">
                    <span class="icon bg-blue"><img src="https://img.icons8.com/?size=24&id=Yj5svDsC4jQA&format=png" /></span>
                    Dashboard
                </a>
                <a href="~/Functionalities/SpeechCapture" class="nav-item @(currentPath == "/Functionalities/SpeechCapture" ? "active" : "") load-trigger">
                    <span class="icon bg-purple"><img src="https://img.icons8.com/ios-filled/24/FFFFFF/flash-on.png" /></span>
                    Speech Capture
                </a>
            </ul>
        </div>

        <div class="quick-actions">
            <p>Quick Actions</p>
            <div class="actions">
                <a href="~/Functionalities/Upload" class="load-trigger">
                    <img src="https://img.icons8.com/?size=24&id=88655&format=png" alt="Google" class="upload-logo" />
                    <section>
                        <p>Upload Notes</p>
                        <p class="sub-text">Add new study materials</p>
                    </section>
                </a>
            </div>
        </div>

        <div id="loading-overlay" class="loading-overlay hidden">
            <div class="loading-card">
                <div class="spinner-ring"></div>
                <h2 class="loading-title">Getting your items...</h2>
                <p class="loading-subtext">Hang tight while we prepare everything for you 💡</p>
            </div>
        </div>

       @*  <div class="stats-section">
            <p class="nav-section-title">QUICK STATS</p>
            <ul class="quick-stats">
                <li>
                    <span class="icon bg-light-blue"><img src="https://img.icons8.com/ios-filled/20/3b82f6/book.png" /></span>
                    <span>Study Notes</span>
                    <strong>0</strong>
                </li>
                <li>
                    <span class="icon bg-light-purple"><img src="https://img.icons8.com/ios-filled/20/9d4edd/flash-on.png" /></span>
                    <span>Flashcards</span>
                    <strong>0</strong>
                </li>
            </ul>
        </div> *@
        
      
    </nav>
    <div class="f-home-controller">
        @RenderBody()
    </div>
    <script>
             const menuBtn = document.getElementById('menu-btn');
        const sideNav = document.getElementById('func-navigation');

        menuBtn.addEventListener('click', () => {
          sideNav.classList.toggle('active');
        });

        // Optional: close nav when clicking outside it
        document.addEventListener('click', (e) => {
          if (!sideNav.contains(e.target) && !menuBtn.contains(e.target)) {
            sideNav.classList.remove('active');

          }
        });


         // Loading animation

            document.addEventListener("DOMContentLoaded", () => {
            const overlay = document.getElementById("loading-overlay");
            if (!overlay) return;

            // Function to show the loader
            const showLoader = () => {
                overlay.classList.remove("hidden");
            };

            // Function to hide the loader
            const hideLoader = () => {
                overlay.classList.add("hidden");
            };

            // Show loader when clicking internal navigation links
            document.querySelectorAll("a.load-trigger").forEach(link => {
                link.addEventListener("click", e => {
                    // Skip if it's an anchor link
                    if (link.href.includes("#")) return;
                    showLoader();
                });
            });

            // Hide loader when page finishes loading
            window.addEventListener("load", hideLoader);
        });

    </script>
</body>
</html>
