<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    <link rel="stylesheet" href="~/css/styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bruno+Ace&family=Michroma&family=Smooch+Sans:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Smooch+Sans:wght@100..900&display=swap" rel="stylesheet">

</head>
<body class="func-nav-body">
    <nav class="func-navigation" id="func-navigation">
        <div class="brand">
            <img src="https://img.icons8.com/ios-filled/50/FFFFFF/graduation-cap.png" alt="Logo" class="logo" />
            <div class="brand-text">
                <h1>MentorNote</h1>
                <p>AI Study Assistant</p>
            </div>
        </div>
        @{
            var currentPath = Context.Request.Path; // current page route
        }
        <div class="nav-section">
            <p class="nav-section-title">STUDY TOOLS</p>
            <ul class="nav-links">
                <a href="~/Start" class="nav-item @(currentPath == "/Start" ? "active" : "") load-trigger">
                    <span class="icon bg-green"><img src="https://img.icons8.com/?size=24&id=Yj5svDsC4jQA&format=png" /></span>
                     Dashboard
                </a>
                <a href="~/Preview?noteId=@Model.Note.Id" class="nav-item @(currentPath == "/Preview" ? "active" : "") load-trigger">
                    <span class="icon bg-blue"><img src="https://img.icons8.com/?size=24&id=2191&format=png&color=000000" /></span>
                     Back To Preview
                </a>

                <a href="~/Functionalities/Flashcards?flashcardSetId=@Model.FlashcardSets[0].Id" class="nav-item @(currentPath == "/Functionalities/Flashcards" ? "active" : "") load-trigger">
                    <span class="icon bg-purple"><img src="https://img.icons8.com/ios-filled/24/FFFFFF/flash-on.png" /></span>
                    Flashcards
                </a>
                <a href="~/Functionalities/AskTutor?noteId=@Model.Note.Id" class="nav-item @(currentPath == "/Functionalities/AskTutor" ? "active" : "") load-trigger">
                    <span class="icon bg-orange"><img src="https://img.icons8.com/ios-filled/24/FFFFFF/chat.png" /></span>
                    AI Tutor
                </a>
                <a href="~/Functionalities/PracticeTest?noteId=@Model.Note.Id" class="nav-item @(currentPath == "/Functionalities/PracticeTest" ? "active" : "") load-trigger">
                    <span class="icon bg-red"><img src="https://img.icons8.com/ios-filled/24/FFFFFF/test-passed.png" /></span>
                    Practice Test
                </a>
                <a href="~/Functionalities/Summary?noteId=@Model.Note.Id" class="nav-item @(currentPath == "/Functionalities/Summary" ? "active" : "") load-trigger">
                    <span class="icon bg-orange"><img src="https://img.icons8.com/ios-filled/24/FFFFFF/chat.png" /></span>
                    Summary
                </a>
            </ul>
        </div>

        <div class="stats-section">
            <ul class="quick-stats">
                <li>
                    @* <button id="second-menu-btn" class="menu-btn">☰</button> *@
                </li>
            </ul>
        </div>
        <div id="loading-overlay" class="loading-overlay hidden">
            <div class="loading-card">
                <div class="spinner-ring"></div>
                <h2 class="loading-title">Getting your items...</h2>
                <p class="loading-subtext">Hang tight while we prepare everything for you 💡</p>
            </div>
        </div>
    </nav>


    <div class="f-home-controller">
        @RenderBody()
    </div>

    <script>
        const menuBtn = document.getElementById('menu-btn');
        const secondmenuBtn = document.getElementById('second-menu-btn');
        const sideNav = document.getElementById('func-navigation');

        menuBtn.addEventListener('click', () => {
          sideNav.classList.toggle('active');
        });


        // Optional: close nav when clicking outside it
        document.addEventListener('click', (e) => {
          if (!sideNav.contains(e.target) && !menuBtn.contains(e.target)) {
            sideNav.classList.remove('active');
          }
        });

        // Loading animation

            document.addEventListener("DOMContentLoaded", () => {
            const overlay = document.getElementById("loading-overlay");
            if (!overlay) return;

            // Function to show the loader
            const showLoader = () => {
                overlay.classList.remove("hidden");
            };

            // Function to hide the loader
            const hideLoader = () => {
                overlay.classList.add("hidden");
            };

            // Show loader when clicking internal navigation links
            document.querySelectorAll("a.load-trigger").forEach(link => {
                link.addEventListener("click", e => {
                    // Skip if it's an anchor link
                    if (link.href.includes("#")) return;
                    showLoader();
                });
            });

            // Hide loader when page finishes loading
            window.addEventListener("load", hideLoader);
        });

       
    </script>
</body>
</html>
