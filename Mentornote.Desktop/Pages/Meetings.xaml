<Page x:Class="Mentornote.Desktop.Pages.Meetings"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:Mentornote.Desktop.Pages"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      MinWidth="450"
      Title="Meetings">

    <!-- Use a Grid so we can place the Add button top-right -->
    <Grid Margin="20">

        <!-- Header Row and Main Content Row -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Header row -->
            <RowDefinition Height="*"/>
            <!-- Meeting lists -->
        </Grid.RowDefinitions>

        <!-- HEADER -->
        <DockPanel Grid.Row="0" Margin="0,0,0,10">
            <!--<TextBlock Text="Appointments "
                       FontSize="18"
                       FontWeight="SemiBold"
                       Foreground="White"
                       DockPanel.Dock="Left"/>-->

            <!-- The Add Meeting button -->
            <DockPanel>
                <Button Content="Refresh Page"
                  Background="Gray"
                  Foreground="White"
                  BorderBrush="Gray"
                  Height="32"
                  Padding="10,2"
                  FontWeight="SemiBold"
                  HorizontalAlignment="Right"
                  DockPanel.Dock="Right"
                  Margin="0,0,0,0"
                  Click="RefreshAppointments_Click"
                  Tag="0"/>
                
                <Button Content="＋ Add Appointment"
                  Background="#FF3A6EE8"
                  Foreground="White"
                  BorderBrush="#FF2B56B9"
                  Height="32"
                  Padding="10,2"
                  FontWeight="SemiBold"
                  HorizontalAlignment="Left"
                  DockPanel.Dock="Left"
                  Margin="5,0,0,0"
                  Click="LoadMore_Click"
                  Tag="0"
                  />
                
            </DockPanel>
          

        </DockPanel>

        <!-- LISTS -->
        <ScrollViewer Grid.Row="1"
              VerticalScrollBarVisibility="Auto"
              HorizontalScrollBarVisibility="Disabled"
              ScrollViewer.CanContentScroll="False">


            <StackPanel>
                <TextBlock Text="Up Comming Appointments"
                           FontSize="18"
                           FontWeight="SemiBold"
                           Foreground="White"
                           DockPanel.Dock="Left"
                           Grid.Row="0"
                           Margin="0,20"/>

                <StackPanel x:Name="NoUpcomingAppointmentsPanel"
                            Visibility="Collapsed"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Margin="20">

                    <TextBlock Text="No upcoming Appointments"
                               FontStyle="Italic"
                               Foreground="Gray"
                               TextAlignment="Center"
                               FontSize="15"/>

                </StackPanel>

                <ListView x:Name="UpcomingAppointmentsList"
                          ItemsSource="{Binding Upcoming}"
                          Background="#FF232323"
                          BorderBrush="#FF333333"
                          Foreground="White"
                          Margin="0,0,0,20"
                          Padding="4"
                          ScrollViewer.CanContentScroll="False"
                          Grid.Row="1">


                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                        </Style>
                    </ListView.ItemContainerStyle>

                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Border Background="#FF2A2A2A"
                                    BorderBrush="#FF3A3A3A"
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="12"
                                    Margin="0,6,0,6">

                                <StackPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Title}"
                                                   FontSize="15"
                                                   FontWeight="Bold"
                                                   Foreground="White"/>

                                        <TextBlock Text="{Binding StartTime, StringFormat='{}{0:hh:mm tt}'}"
                                                   FontSize="10"
                                                   FontWeight="Bold"
                                                   Foreground="LightBlue"
                                                   Margin="10,5"/>

                                        <TextBlock Text="{Binding EndTime, StringFormat='{}{0:hh:mm tt}'}"
                                                   FontSize="10"
                                                   FontWeight="Bold"
                                                   Foreground="LightBlue"
                                                   Margin="2,5"/>       

                                    </StackPanel>

                                    <TextBlock Text="{Binding AppointmentType}" 
                                               Foreground="#FFBFBFBF" 
                                               Margin="0,2,0,0"/>
                                    <TextBlock Text="{Binding Status}" 
                                               Foreground="#FF7DBEFF"
                                               FontWeight="SemiBold"
                                               Margin="0,6,0,0"/>

                                    <Button  Content="Edit Appointment"
                                             Width="120"
                                             Height="36"
                                             Background="#FF3A3A3A"
                                             Foreground="White"
                                             BorderBrush="#FF4A4A4A"
                                             HorizontalAlignment="Left"
                                             Margin="0,20,0,0"
                                             VerticalAlignment="Top"
                                             Click="LoadMore_Click"
                                        Tag="{Binding Id}"/>

                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                        <Button Content="Start Overlay"
                                                Width="140"
                                                Height="40"
                                                Click="OpenOverlay_Click"
                                                Background="#7df5e9"
                                                Margin="5,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Tag="{Binding Id}"/>

                                        <Button Content="Delete"
                                                Width="100"
                                                Height="40"
                                                Click="DeleteAppointment_Click"
                                                Background="#f5877d"
                                                Foreground="White"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Tag="{Binding Id}"/>
                                        
                                        <Button Content="View Summary"
                                                x:Name="ViewSummaryButton"
                                                Visibility="Visible"
                                                Click="ViewSummary_Click"
                                                Loaded="ViewSummaryButton_Loaded"
                                                Tag="{Binding Id}"
                                                Width="140"
                                                Height="40"
                                                Margin="5,0"
                                                Background="#8fcee3"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>

                <!--Past Appointments-->
                <TextBlock Text="Past Appointments"
                           FontSize="18"
                           FontWeight="SemiBold"
                           Foreground="White"
                           DockPanel.Dock="Left"
                           Grid.Row="2"
                           Margin="0,20"/>

                <ListView x:Name="PastAppointmentsList"
                          ItemsSource="{Binding Past}"
                          Background="#FF232323"
                          BorderBrush="#FF333333"
                          Foreground="White"
                          Margin="0,0,0,20"
                          Padding="4"
                          ScrollViewer.CanContentScroll="False"
                          Grid.Row="3">


                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                        </Style>
                    </ListView.ItemContainerStyle>

                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Border Background="#FF2A2A2A"
                                    BorderBrush="#FF3A3A3A"
                                    BorderThickness="1"
                                    CornerRadius="8"
                                    Padding="12"
                                    Margin="0,6,0,6">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding Title}"
                                                   FontSize="15"
                                                   FontWeight="Bold"
                                                   Foreground="White"/>

                                        <TextBlock Text="{Binding StartTime, StringFormat='{}{0:hh:mm tt}'}"
                                                   FontSize="10"
                                                   FontWeight="Bold"
                                                   Foreground="LightBlue"
                                                   Margin="10,5"/>

                                        <TextBlock Text="{Binding EndTime, StringFormat='{}{0:hh:mm tt}'}"
                                                   FontSize="10"
                                                   FontWeight="Bold"
                                                   Foreground="LightBlue"
                                                   Margin="2,5"/>

                                    </StackPanel>
                                    <TextBlock Text="{Binding AppointmentType}" 
                                               Foreground="#FFBFBFBF" 
                                               Margin="0,2,0,0"/>
                                    <TextBlock Text="{Binding Status}" 
                                               Foreground="#FF7DBEFF"
                                               FontWeight="SemiBold"
                                               Margin="0,6,0,0"/>
                                    <Button  Content="Edit Appointment"
                                             Width="120"
                                             Height="36"
                                             Background="#FF3A3A3A"
                                             Foreground="White"
                                             BorderBrush="#FF4A4A4A"
                                             HorizontalAlignment="Left"
                                             Margin="0,20,0,0"
                                             VerticalAlignment="Top"
                                             Click="LoadMore_Click"
                                             Tag="{Binding Id}"/>

                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                        <Button Content="Start Overlay"
                                                Width="140"
                                                Height="40"
                                                Click="OpenOverlay_Click"
                                                Background="#7df5e9"
                                                Margin="5,0"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Tag="{Binding Id}"/>

                                        <Button Content="Delete"
                                                Width="100"
                                                Height="40"
                                                Click="DeleteAppointment_Click"
                                                Background="#f5877d"
                                                Foreground="White"
                                                HorizontalAlignment="Right"
                                                VerticalAlignment="Top"
                                                Tag="{Binding Id}"/>

                                        <Button Content="View Summary"
                                                x:Name="ViewSummaryButton"
                                                Click="ViewSummary_Click"
                                                Loaded="ViewSummaryButton_Loaded"
                                                Tag="{Binding Id}"
                                                Width="140"
                                                Height="40"
                                                Margin="5,0"
                                                Background="#8fcee3"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ListView.ItemTemplate>

                </ListView>
                <StackPanel x:Name="NoAppointmentsPanel"
                            Visibility="Collapsed"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Margin="20">

                    <TextBlock Text="No appointments created yet."
                               FontStyle="Italic"
                               Foreground="Gray"
                               TextAlignment="Center"/>

                </StackPanel>
            </StackPanel>

        </ScrollViewer>

    </Grid>
</Page>
